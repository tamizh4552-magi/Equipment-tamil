<!DOCTYPE html>
<html>
<head>
<title>View Requests</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4 bg-light">
<div class="container">

<h4>Submitted Requests</h4>
<a href="index.html" class="btn btn-secondary mb-3">Back</a>

<table class="table table-bordered">
<thead>
<tr>
<th>Name</th><th>User ID</th><th>Date</th>
<th>Product</th><th>Size</th><th>Qty</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbxchKT7ppigyYLhVkX4gFy3y85phZAEOHfh-kKIANXe9y38s8yyCBLS2XHzHEGBjjLNWA/exec?action=view";

fetch(API)
.then(r=>r.json())
.then(d=>{
  rows.innerHTML = d.products.map(p=>{
    const req = d.requests.find(r=>r[2]===p[4]) || [];
    return `
    <tr>
      <td>${req[1]||""}</td>
      <td>${p[4]}</td>
      <td>${req[4]||""}</td>
      <td>${p[1]}</td>
      <td>${p[2]}</td>
      <td>${p[3]}</td>
    </tr>`;
  }).join("");
});
</script>

</body>
</html>
